"Task": {
	// optional
	Label="...",

	// mandatory
	"Type": "Live-Recorder",

	// The Workflow ingested by the MMS Task Manager to add the generated Chunks
	// will have the following variables:
	// - CurrentUtcChunkStartTime, integer, UTC Start Time of the current chunk
	// - PreviousUtcChunkStartTime, integer, UTC Start Time of the previous chunk
	// - CurrentUtcChunkStartTime_HHMISS, string, Local Time having the HH:MI:SS format
	// - DeliveryCode, integer, delivery code of the Live Recorder
	// - IngestionJobLabel, string, ingestion job label of the Live Recorder
	"Parameters": {

		// mandatory: it identifies the channel
		"ConfigurationLabel": "",

		// mandatory
		//	It identifies this specific recording. In case for example
		//	- we have two recordings of the same channel
		//	- we have the same channel delivered
		//		as Recording monitor HLS and Live Proxy Output
		//	- we need to use Live-Cut on the recorded channel
		//	In these scenarios, delivery code identifies each delivery.
		//	Internally the delivery code is used to
		//		- build the delivery URL (so it is used to build
		//			the path where the Monitor HLS segments are saved)
		//		- to label the generated chunks
		//		- as input in the Live-Cut task
		"DeliveryCode": 12345,

		// optional: user agent used only in case actAsServer is false
		"UserAgent": "",

		// mandatory: It specifies the recording period, his format is:
		//       - Zulu/UTC Date-time having the following format: YYYY-MM-DDTHH:MI:SSZ
		"schedule": {
			"start": "2019-01-21T12:30:00Z",
			"end": "2019-01-21T13:30:00Z",
			// If true, as soon as the End is reached, the recording will start again
			// with the following dates:
			//	Start will be set to the End
			//	End will be increased of the same period (End - Start)
			"autoRenew": false
		},

		// mandatory, it has to be as even number (numero pari) and cannot be smaller than 10
		//		MMS records the live feed and save it in files. This parameter specifies
		//		the duration in seconds of each media item (file) generated by MMS
		//		Example: 60 means a media item (file) each minute is generated.
		"SegmentDuration": 60,

		// optional. It is the format of the media items (files) that will be generated by MMS.
		//		Default value is 'ts'.
		"OutputFileFormat": "ts",

		// optional. To be set with the EncodersPool label only in case 
		// a specific encoders pool has to be used.
		// In case this field is initialized here, it overrides the one specified by the channel
		// configuration label
		"EncodersPool": "",

		// optional. the LiveRecorderVOD is the Media Item updated continuously containing
		//	Live Recording. 
		// This field is optional, if not present no LiveRecorderVOD is generated.
		// By default LiveRecorderVirtualVOD is not present
		"LiveRecorderVirtualVOD": {

			// optional. it specifies the max duration of the LiveRecorderVOD in minutes
			//	Default is 120 minutes
			"LiveRecorderVirtualVODMaxDuration": 120,

			// This is an HLS profile and, generally, this is a low encoding profile
			//		The encoding profile can be specified using EncodingProfileKey or EncodingProfileLabel. 
			//      In case the EncodingProfileLabel is not unique in the system, ContentType has to be present too
			//      Possible values for the ContentType are: video, audio
			"EncodingProfileKey": 1,
			"EncodingProfileLabel": "MMS_HLS_H264_800Kb_veryfast_360p25_high422_AAC_92",
			"ContentType": "video",

			// optional. Default: 10
			"SegmentDurationInSeconds": 10
		}

		// monitorHLS allows to monitor the input stream providing an HLS delivery
		//	that can be used inside a player.
		// This field is optional, if not present no monitor HLS is generated. By default monitorHLS is not present
		"MonitorHLS": {

			// optional: this parameter is needed in case we need a specific encoding profile for the monitor HLS.
			// This is an HLS profile and, generally, this is a low encoding profile
			//		The encoding profile can be specified using EncodingProfileKey or EncodingProfileLabel. 
			//      In case the EncodingProfileLabel is not unique in the system, ContentType has to be present too
			//      Possible values for the ContentType are: video, audio
			//	In case also LiveRecorderVirtualVOD is true, it is used the encoding profiles
			//	specified into the LiveRecorderVirtualVOD json section
			"EncodingProfileKey": 1,
			"EncodingProfileLabel": "MMS_HLS_H264_800Kb_veryfast_360p25_high422_AAC_92",
			"ContentType": "video",

			// In case LiveRecorderVirtualVOD is true, this parameter is not used
			// optional. Default: 6
			"PlaylistEntriesNumber": 6,

			// In case LiveRecorderVirtualVOD is true, is is used the duration
			//	specified into the LiveRecorderVirtualVOD json section
			// optional. Default: 10
			"SegmentDurationInSeconds": 10
		},

		// Optional. This json array lists all the Outputs the Live-Recorder task has to generate.
		"Outputs" = [
			{
				// optional, possible values: HLS, DASH, RTMP_Stream, AWS_CHANNEL.
				// Default: HLS
				"OutputType": "HLS",

				// DeliveryCode is used only in case of HLS and DASH
				//	It identifies this specific delivery. In case for example
				//	- we have two HLS Outputs or
				//	- we have the same channel delivered
				//		as Recording monitor HLS and Live Proxy Output
				//	In these scenarios, delivery code identifies each delivery.
				//	Internally the delivery code is used to
				//		- build the delivery URL (so it is used to build
				//			the path where the HLS segments are saved)
				// mandatory only if OutputType is HLS or DASH.
				"DeliveryCode": 12345,

				// optional, used only in case of HLS, Default: 10
				"SegmentDurationInSeconds": 10,

				// optional, used only in case of HLS, Default: 6
				"PlaylistEntriesNumber": 6,

				// mandatory only in case of RTMP_Stream
				"RtmpUrl": "...",
				// optional only in case of RTMP_Stream
				"rtmpStreamName": "...",
				// optional only in case of RTMP_Stream
				"rtmpUserName": "...",
				// optional only in case of RTMP_Stream
				"rtmpPassword": "...",

				// optional only in case of RTMP_Stream. It specifies the url to be used
				//		to play the stream sent through the rtmp 
				"PlayUrl": "...",

				// optional, used only in case of AWS_CHANNEL
				// the configuration label of an AWS Channel defined in MMS.
				// If not present, a SHARED free AWS channel is used
				"awsChannelConfigurationLabel": "",

				// optional, used only in case of AWS_CHANNEL
				// it specifies if a signed URL has to be used
				// Default: false
				"awsSignedURL": false,

				// optional, used only in case of AWS_CHANNEL and awsSignedURL is true
				// it specifies the expiration of the signed URL
				// Default: 1440 (1 day)
				"expirationInMinutes": 1440,


				// optional: It is possible to use this field to specify any other output options.
				// Examples:
				//	-map 0:1: specify to take the stream 1 from the first input (0) to be used in the output
				//	-map 0:a:2: specify to take the stream audio 2 from the first input (0) to be used in the output
				//	-map 0:v: specify to take all video from the first input (0) to be used in the output
				"OtherOutputOptions": "-map 0:1",

				// optional
				"filters": {
					"video": [
						{
							"type": "fade",
							"duration": 4
						},
						{
							"type": "blackdetect",
							"black_min_duration": 2.0,
							"pixel_black_th": 0.0
						},
						{
							"type": "blackframe",
							"amount": 98,
							"threshold": 32
						},
						{
							"type": "freezedetect",
							"noiseInDb": -60,
							"duration": 2
						}
					],
					"audio": [
						{
							"type": "silencedetect",
							"noise": 0.0001
						},
						{
							"type": "volume",
							//	- 0.5: If we want our volume to be half of the input volume
							//	- 1.5: 150% of current volume
							//	- 10dB: increase the volume by 10dB
							//	- -5dB: reduce the volume by 5dB
							"factor": 5.0
						}
					],
					"complex": [
						{
							"type": "blackframe",
							"amount": 98,
							"threshold": 32
						},
						{
							"type": "blend",
							"mode": "difference",
							"shortest": 1
						}
					]
				}

				// optional: this parameter is needed only in case the streaming has to be encoded before proxying
				//    The encoding profile can be specified using EncodingProfileKey or EncodingProfileLabel.
				//		In case the EncodingProfileLabel is not unique in the system, ContentType has to be present too
				//		Possible values for the ContentType are: video, audio
				"EncodingProfileKey": 1,
				"EncodingProfileLabel": "Profile sport",
				"ContentType": "video"
			}
		],

		// optional: If present, it specifies when the Task has to be executed. The processing of the task
		//		can be delayed respect to the specified date based on his dependencies with other tasks.
		//		The date format is:
		//       - Zulu/UTC Date-time having the following format: YYYY-MM-DDTHH:MI:SSZ
		//	If it is not present, by default it will be initialized with the ingesion time
		"ProcessingStartingFrom": "2019-01-21T12:30:00Z",

		// optional: It is used in case this Task has to wait a Task of another Workflow
		"WaitFor": [
			{
				"GlobalIngestionLabel": "XXXX"
			}
		],

		// optional: it might contain any kind of user data (json format).
		// The platform stores them and returns this data to the Customer 
		// every time is requested.
		// The UserData are involved in searches as well
		"UserData": { },

		// optional: it specifies the retention of the content (MediaItem/chunk retention). Once the retention expires,
		//		content including all his profiles (PhysicalItems) will be removed.
		//     Format: number + s (seconds) or m (minutes) or h (hours) or d (days) or M (month) or Y (year)
		//     Examples: 10s, 45m, 4h, 7d, 3M, 1y
		// By default it is 60m
		"Retention": "60m",

		// optional: It is possible to specify a specific retention just for the profile (PhysicalItem).
		//		In this case, if the retention of the profile (PhysicalItem) expires before the retention of the
		//		content (MediaItem), only the profiles will be removed.
		//		It has not have sense specifies a PhysicalItem retention greater than the MediaItem retention.
		//		If it is not specified, only the MediaItem retention is used.
		"PhysicalItemRetention": "30m".

		// optional. Possible values: Low, Medium, High
		// If not present or if it is specifying a priority bigger than the allowed for this Workspace,
		//   the MaxEncodingPriority of the Workspace will be used.
		"EncodingPriority": "Low",

		// optional
		"Ingester": "my ingester",

		// optional. Tags to be assigned to the chunks generated by this task
		"Tags": [ "tag 1", "tag 2" ],

		// optional
		"ContentProviderName": "default",

		// optional: it specifies the filename without extension used by MMS when the content is delivered
		"DeliveryFileName": "myFileName",

		// optional: by default the content is published.
		//    It specifies if and when the content is published.
		//    In case the content is not published, the delivery of the content will fail
		//    Possible values can be:
		//       - NOW
		//       - FOREVER
		//       - Zulu/UTC Date-time having the following format: YYYY-MM-DDTHH:MI:SSZ
		"Publishing": {
			"StartPublishing": "NOW",
			"EndPublishing": "FOREVER"
		}
	}
}
